{% extends "layout.html" %}
{% from "macros/form.html" import input %}
{% block title %} 비밀번호 초기화 {% endblock %}

{% block section %}

<div class="product-page">
    <div class="page-header" data-parallax="true" style="background-image: url('/static/images/main/bg_anyone.png');">
	    <div class="container">
	        <div class="row title-row">
	            <div class="col-md-4 col-md-offset-8">
	            </div>
	        </div>
	    </div>
	</div>
    <div class="section section-gray">
        <div class="container">
			<div class="main main-raised">
				<div class="contact-content">
					<h4 class="title">비밀번호를 초기화 합니다.</h4>
					<div class="row">
						<div class="col-md-6">
							<p class="description">비밀번호를 분실한 경우 초기화 할 수 있습니다. 아래의 정보를 정확히 넣고 초기화 신청을 하면 유효한 안내 메일이 개인 계정으로 발송됩니다.
							</p>
							<form id="passForm" name="passForm" method="POST" action="{{ url_for('accounts.member_pass_reset_post') }}" class="form">
								<div class="form-group label-static">
									<label class="control-label">이메일 계정</label>
									{{ input('email', 'user_email', user_email, opt='required') }}
								</div>
								<div class="form-group label-static">
									<label class="control-label">회원명</label>
									{{ input('text', 'member_name', member_name, opt='required') }}
								</div>
								<br />
								<div class="form-group form-button">
                                    <button type="button" class="btn btn-github btn-round" onclick="javascript:history.back()">
                                        <i class="material-icons">arrow_back</i> 뒤로가기
                                    </button>
                                    <button type="button" class="btn btn-facebook btn-round" onclick="onSubmit()">
                                        <i class="material-icons">check</i> 신청하기
                                    </button>
								</div>
								<span id="alert" class="material-input text-rose"></span>
								<div id="progress-bar" class="progress progress-line-primary" style="display:none">
									<div id="progress" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
								 	</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
    	</div>
    </div> <!--section end -->
</div>

<script type="text/javascript">
    function updateProgressBar() {
		var progress = 0;
		var progressBar = document.getElementById("progress");
		var width = 0;
		var interval = setInterval(frame, 50);

		function frame() {
			if (width >= 100) {
				clearInterval(interval);
			} else {
				width++;
				progressBar.style.width = width + "%";
				progressBar.innerHTML = width + "%";
			}
		}
	}

  	function onSubmit() {
		var form = document.getElementById("passForm");
		if (form.checkValidity()) {
			document.getElementById("alert").innerText="";
			var progress = document.getElementById("progress-bar");
			progress.style.display = "block";
			updateProgressBar();
			form.submit();
		} else {
			document.getElementById("alert").innerText="입력값이 올바른지 확인 부탁드립니다.";
		}
    }
</script>

{% endblock %}

